var G=Object.defineProperty;var M=t=>{throw TypeError(t)};var J=(t,e,s)=>e in t?G(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var N=(t,e,s)=>J(t,typeof e!="symbol"?e+"":e,s),w=(t,e,s)=>e.has(t)||M("Cannot "+s);var a=(t,e,s)=>(w(t,e,"read from private field"),s?s.call(t):e.get(t)),v=(t,e,s)=>e.has(t)?M("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,s),Y=(t,e,s,i)=>(w(t,e,"write to private field"),i?i.call(t,s):e.set(t,s),s);import{m as x,z as V,J as y,A as K,c as F,n as C,h as k,j as Q,a6 as W,o as X,b as ee,a as te,a7 as se,r as ae,H as re,f as ie,s as fe,i as U,a8 as ne,a9 as ce,V as q,B as de,aa as z,ab as he,ac as ue,ad as _e,d as O,Z as le,e as oe,ae as ve,af as be,N as ge,ag as Se,ah as Ae,ai as Pe,aj as Ee,ak as Re,al as Te,am as me,an as Ie}from"./DYu2Xxxm.js";var _,l,u,b,E,R,I;class pe{constructor(e,s=!0){N(this,"anchor");v(this,_,new Map);v(this,l,new Map);v(this,u,new Map);v(this,b,new Set);v(this,E,!0);v(this,R,()=>{var e=x;if(a(this,_).has(e)){var s=a(this,_).get(e),i=a(this,l).get(s);if(i)V(i),a(this,b).delete(s);else{var f=a(this,u).get(s);f&&(a(this,l).set(s,f.effect),a(this,u).delete(s),f.fragment.lastChild.remove(),this.anchor.before(f.fragment),i=f.effect)}for(const[r,c]of a(this,_)){if(a(this,_).delete(r),r===e)break;const n=a(this,u).get(c);n&&(y(n.effect),a(this,u).delete(c))}for(const[r,c]of a(this,l)){if(r===s||a(this,b).has(r))continue;const n=()=>{if(Array.from(a(this,_).values()).includes(r)){var o=document.createDocumentFragment();W(c,o),o.append(F()),a(this,u).set(r,{effect:c,fragment:o})}else y(c);a(this,b).delete(r),a(this,l).delete(r)};a(this,E)||!i?(a(this,b).add(r),K(c,n,!1)):n()}}});v(this,I,e=>{a(this,_).delete(e);const s=Array.from(a(this,_).values());for(const[i,f]of a(this,u))s.includes(i)||(y(f.effect),a(this,u).delete(i))});this.anchor=e,Y(this,E,s)}ensure(e,s){var i=x,f=X();if(s&&!a(this,l).has(e)&&!a(this,u).has(e))if(f){var r=document.createDocumentFragment(),c=F();r.append(c),a(this,u).set(e,{effect:C(()=>s(c)),fragment:r})}else a(this,l).set(e,C(()=>s(this.anchor)));if(a(this,_).set(i,e),f){for(const[n,d]of a(this,l))n===e?i.skipped_effects.delete(d):i.skipped_effects.add(d);for(const[n,d]of a(this,u))n===e?i.skipped_effects.delete(d.effect):i.skipped_effects.add(d.effect);i.oncommit(a(this,R)),i.ondiscard(a(this,I))}else k&&(this.anchor=Q),a(this,R).call(this)}}_=new WeakMap,l=new WeakMap,u=new WeakMap,b=new WeakMap,E=new WeakMap,R=new WeakMap,I=new WeakMap;function De(t,e,s=!1){k&&te();var i=new pe(t),f=s?se:0;function r(c,n){if(k){const o=ae(t)===re;if(c===o){var d=ie();fe(d),i.anchor=d,U(!1),i.ensure(c,n),U(!0);return}}i.ensure(c,n)}ee(()=>{var c=!1;e((n,d=!0)=>{c=!0,r(d,n)}),c||r(!1,null)},f)}function j(t,e){return t===e||(t==null?void 0:t[z])===e}function Be(t={},e,s,i){return ne(()=>{var f,r;return ce(()=>{f=r,r=[],q(()=>{t!==s(...r)&&(e(t,...r),f&&j(s(...f),t)&&e(null,...f))})}),()=>{de(()=>{r&&j(s(...r),t)&&e(null,...r)})}}),t}let m=!1;function ye(t){var e=m;try{return m=!1,[t(),m]}finally{m=e}}function Le(t,e,s,i){var B;var f=!Pe||(s&Ee)!==0,r=(s&Ae)!==0,c=(s&Te)!==0,n=i,d=!0,o=()=>(d&&(d=!1,n=c?q(i):i),n),S;if(r){var H=z in t||Ie in t;S=((B=he(t,e))==null?void 0:B.set)??(H&&e in t?h=>t[e]=h:void 0)}var A,D=!1;r?[A,D]=ye(()=>t[e]):A=t[e],A===void 0&&i!==void 0&&(A=o(),S&&(f&&ue(),S(A)));var g;if(f?g=()=>{var h=t[e];return h===void 0?o():(d=!0,h)}:g=()=>{var h=t[e];return h!==void 0&&(n=void 0),h===void 0?n:h},f&&(s&_e)===0)return g;if(S){var Z=t.$$legacy;return(function(h,T){return arguments.length>0?((!f||!T||Z||D)&&S(T?g():h),h):g()})}var p=!1,P=((s&Re)!==0?le:oe)(()=>(p=!1,g()));r&&O(P);var $=ge;return(function(h,T){if(arguments.length>0){const L=T?O(P):f&&r?ve(h):h;return be(P,L),p=!0,n!==void 0&&(n=L),h}return me&&p||($.f&Se)!==0?P.v:O(P)})}export{pe as B,Be as b,De as i,Le as p};
