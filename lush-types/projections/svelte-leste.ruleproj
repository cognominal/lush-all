rule ElementBlock
  match
    type: Element
    name: $name
    attrs: $attrs
    children: $kids
    where: blockTag($name)
  emit
    line: tagWithAttrs($name, $attrs)
    block
      each: $kids

rule ElementInline
  match
    type: Element
    name: $name
    attrs: $attrs
    children: $kids
    where: inlineTag($name)
  emit
    line: inlineTagWithAttrs($name, $attrs, $kids)

rule Text
  match
    type: Text
    data: $text
  emit
    line: text($text)
